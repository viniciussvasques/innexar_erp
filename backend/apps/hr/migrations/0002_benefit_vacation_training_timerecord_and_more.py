# Generated by Django 4.2.9 on 2025-11-14 17:19

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('hr', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='Benefit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Name')),
                ('benefit_type', models.CharField(choices=[('meal_voucher', 'Meal Voucher'), ('food_voucher', 'Food Voucher'), ('transportation', 'Transportation Voucher'), ('health_insurance', 'Health Insurance'), ('dental_insurance', 'Dental Insurance'), ('life_insurance', 'Life Insurance'), ('daycare', 'Daycare Allowance'), ('gympass', 'Gympass'), ('other', 'Other')], max_length=30, verbose_name='Type')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('value', models.DecimalField(blank=True, decimal_places=2, help_text='Default value for this benefit', max_digits=15, null=True, verbose_name='Value')),
                ('limit', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum value limit', max_digits=15, null=True, verbose_name='Limit')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated at')),
            ],
            options={
                'verbose_name': 'Benefit',
                'verbose_name_plural': 'Benefits',
                'db_table': 'hr_benefits',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Vacation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('requested', 'Requested'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('taken', 'Taken'), ('cancelled', 'Cancelled')], default='requested', max_length=20, verbose_name='Status')),
                ('start_date', models.DateField(verbose_name='Start Date')),
                ('end_date', models.DateField(verbose_name='End Date')),
                ('days', models.IntegerField(help_text='Calculated number of days', verbose_name='Days')),
                ('acquisition_period_start', models.DateField(verbose_name='Acquisition Period Start')),
                ('acquisition_period_end', models.DateField(verbose_name='Acquisition Period End')),
                ('sell_days', models.IntegerField(default=0, help_text='Number of vacation days to sell', verbose_name='Sell Days')),
                ('cash_allowance', models.BooleanField(default=False, help_text='Pecuniary allowance', verbose_name='Cash Allowance')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='Approved At')),
                ('rejection_reason', models.TextField(blank=True, verbose_name='Rejection Reason')),
                ('requested_at', models.DateTimeField(auto_now_add=True, verbose_name='Requested At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_vacations', to=settings.AUTH_USER_MODEL, verbose_name='Approved By')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='vacations', to='hr.employee', verbose_name='Employee')),
            ],
            options={
                'verbose_name': 'Vacation',
                'verbose_name_plural': 'Vacations',
                'db_table': 'hr_vacations',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='Training',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255, verbose_name='Name')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('training_type', models.CharField(blank=True, help_text='Internal, External, Online, etc.', max_length=50, verbose_name='Type')),
                ('start_date', models.DateField(blank=True, null=True, verbose_name='Start Date')),
                ('end_date', models.DateField(blank=True, null=True, verbose_name='End Date')),
                ('duration_hours', models.IntegerField(blank=True, null=True, verbose_name='Duration (Hours)')),
                ('location', models.CharField(blank=True, max_length=255, verbose_name='Location')),
                ('instructor', models.CharField(blank=True, max_length=255, verbose_name='Instructor')),
                ('provides_certificate', models.BooleanField(default=False, verbose_name='Provides Certificate')),
                ('certificate_validity_months', models.IntegerField(blank=True, null=True, verbose_name='Certificate Validity (Months)')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated at')),
            ],
            options={
                'verbose_name': 'Training',
                'verbose_name_plural': 'Trainings',
                'db_table': 'hr_trainings',
                'ordering': ['-start_date', 'name'],
                'indexes': [models.Index(fields=['is_active', 'start_date'], name='hr_training_is_acti_9356a7_idx')],
            },
        ),
        migrations.CreateModel(
            name='TimeRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('record_type', models.CharField(choices=[('check_in', 'Check In'), ('check_out', 'Check Out'), ('lunch_in', 'Lunch In'), ('lunch_out', 'Lunch Out'), ('overtime_in', 'Overtime In'), ('overtime_out', 'Overtime Out')], max_length=20, verbose_name='Record Type')),
                ('record_date', models.DateField(verbose_name='Date')),
                ('record_time', models.TimeField(verbose_name='Time')),
                ('latitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True, verbose_name='Latitude')),
                ('longitude', models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True, verbose_name='Longitude')),
                ('is_approved', models.BooleanField(default=False, verbose_name='Approved')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='Approved At')),
                ('justification', models.TextField(blank=True, verbose_name='Justification')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created at')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_time_records', to=settings.AUTH_USER_MODEL, verbose_name='Approved By')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='time_records', to='hr.employee', verbose_name='Employee')),
            ],
            options={
                'verbose_name': 'Time Record',
                'verbose_name_plural': 'Time Records',
                'db_table': 'hr_time_records',
                'ordering': ['-record_date', '-record_time'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceReview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('review_period_start', models.DateField(verbose_name='Review Period Start')),
                ('review_period_end', models.DateField(verbose_name='Review Period End')),
                ('review_date', models.DateField(verbose_name='Review Date')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='draft', max_length=20, verbose_name='Status')),
                ('criteria_scores', models.JSONField(default=dict, help_text='Dictionary with criterion as key and score as value', verbose_name='Criteria Scores')),
                ('overall_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Overall Score')),
                ('strengths', models.TextField(blank=True, verbose_name='Strengths')),
                ('areas_for_improvement', models.TextField(blank=True, verbose_name='Areas for Improvement')),
                ('goals', models.TextField(blank=True, verbose_name='Goals')),
                ('development_plan', models.TextField(blank=True, verbose_name='Development Plan')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated at')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='performance_reviews', to='hr.employee', verbose_name='Employee')),
                ('reviewer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='reviews_given', to='hr.employee', verbose_name='Reviewer')),
            ],
            options={
                'verbose_name': 'Performance Review',
                'verbose_name_plural': 'Performance Reviews',
                'db_table': 'hr_performance_reviews',
                'ordering': ['-review_date'],
            },
        ),
        migrations.CreateModel(
            name='Payroll',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('payroll_number', models.CharField(max_length=50, unique=True, verbose_name='Payroll Number')),
                ('month', models.IntegerField(help_text='1-12', verbose_name='Month')),
                ('year', models.IntegerField(verbose_name='Year')),
                ('base_salary', models.DecimalField(decimal_places=2, max_digits=15, verbose_name='Base Salary')),
                ('commissions', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Commissions')),
                ('overtime', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Overtime')),
                ('bonuses', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Bonuses')),
                ('benefits_value', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Benefits Value')),
                ('total_earnings', models.DecimalField(decimal_places=2, help_text='Calculated: base_salary + commissions + overtime + bonuses + benefits_value', max_digits=15, verbose_name='Total Earnings')),
                ('inss', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='INSS')),
                ('irrf', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='IRRF')),
                ('fgts', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='FGTS')),
                ('transportation', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Transportation')),
                ('meal_voucher', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Meal Voucher')),
                ('loans', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Loans')),
                ('advances', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Advances')),
                ('other_deductions', models.DecimalField(decimal_places=2, default=0, max_digits=15, verbose_name='Other Deductions')),
                ('total_deductions', models.DecimalField(decimal_places=2, help_text='Sum of all deductions', max_digits=15, verbose_name='Total Deductions')),
                ('net_salary', models.DecimalField(decimal_places=2, help_text='total_earnings - total_deductions', max_digits=15, verbose_name='Net Salary')),
                ('is_processed', models.BooleanField(default=False, verbose_name='Processed')),
                ('processed_at', models.DateTimeField(blank=True, null=True, verbose_name='Processed At')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated at')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='payrolls', to='hr.employee', verbose_name='Employee')),
            ],
            options={
                'verbose_name': 'Payroll',
                'verbose_name_plural': 'Payrolls',
                'db_table': 'hr_payrolls',
                'ordering': ['-year', '-month'],
            },
        ),
        migrations.CreateModel(
            name='JobOpening',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=255, verbose_name='Title')),
                ('description', models.TextField(verbose_name='Description')),
                ('requirements', models.TextField(blank=True, verbose_name='Requirements')),
                ('salary_min', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Minimum Salary')),
                ('salary_max', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Maximum Salary')),
                ('posted_date', models.DateField(auto_now_add=True, verbose_name='Posted Date')),
                ('closing_date', models.DateField(blank=True, null=True, verbose_name='Closing Date')),
                ('status', models.CharField(choices=[('open', 'Open'), ('closed', 'Closed'), ('cancelled', 'Cancelled')], default='open', max_length=20, verbose_name='Status')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated at')),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='job_openings', to='hr.department', verbose_name='Department')),
            ],
            options={
                'verbose_name': 'Job Opening',
                'verbose_name_plural': 'Job Openings',
                'db_table': 'hr_job_openings',
                'ordering': ['-posted_date'],
            },
        ),
        migrations.CreateModel(
            name='EmployeeTraining',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('enrolled', 'Enrolled'), ('in_progress', 'In Progress'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='enrolled', max_length=20, verbose_name='Status')),
                ('enrollment_date', models.DateField(auto_now_add=True, verbose_name='Enrollment Date')),
                ('completion_date', models.DateField(blank=True, null=True, verbose_name='Completion Date')),
                ('score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='Score')),
                ('certificate_issued', models.BooleanField(default=False, verbose_name='Certificate Issued')),
                ('certificate_issued_date', models.DateField(blank=True, null=True, verbose_name='Certificate Issued Date')),
                ('certificate_expiry_date', models.DateField(blank=True, null=True, verbose_name='Certificate Expiry Date')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated at')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='trainings', to='hr.employee', verbose_name='Employee')),
                ('training', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employee_trainings', to='hr.training', verbose_name='Training')),
            ],
            options={
                'verbose_name': 'Employee Training',
                'verbose_name_plural': 'Employee Trainings',
                'db_table': 'hr_employee_trainings',
            },
        ),
        migrations.CreateModel(
            name='EmployeeBenefit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('value', models.DecimalField(blank=True, decimal_places=2, help_text='Custom value for this employee (if different from default)', max_digits=15, null=True, verbose_name='Value')),
                ('start_date', models.DateField(verbose_name='Start Date')),
                ('end_date', models.DateField(blank=True, null=True, verbose_name='End Date')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created at')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated at')),
                ('benefit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employee_benefits', to='hr.benefit', verbose_name='Benefit')),
                ('employee', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='employee_benefits', to='hr.employee', verbose_name='Employee')),
            ],
            options={
                'verbose_name': 'Employee Benefit',
                'verbose_name_plural': 'Employee Benefits',
                'db_table': 'hr_employee_benefits',
            },
        ),
        migrations.CreateModel(
            name='Candidate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('first_name', models.CharField(max_length=100, verbose_name='First Name')),
                ('last_name', models.CharField(max_length=100, verbose_name='Last Name')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
                ('phone', models.CharField(blank=True, max_length=20, verbose_name='Phone')),
                ('status', models.CharField(choices=[('applied', 'Applied'), ('screening', 'Screening'), ('interview', 'Interview'), ('test', 'Test'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('hired', 'Hired')], default='applied', max_length=20, verbose_name='Status')),
                ('resume', models.FileField(blank=True, null=True, upload_to='resumes/', verbose_name='Resume')),
                ('notes', models.TextField(blank=True, verbose_name='Notes')),
                ('applied_at', models.DateTimeField(auto_now_add=True, verbose_name='Applied At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('job_opening', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='candidates', to='hr.jobopening', verbose_name='Job Opening')),
            ],
            options={
                'verbose_name': 'Candidate',
                'verbose_name_plural': 'Candidates',
                'db_table': 'hr_candidates',
                'ordering': ['-applied_at'],
            },
        ),
        migrations.AddIndex(
            model_name='benefit',
            index=models.Index(fields=['benefit_type', 'is_active'], name='hr_benefits_benefit_32ad29_idx'),
        ),
        migrations.AddIndex(
            model_name='vacation',
            index=models.Index(fields=['employee', 'status'], name='hr_vacation_employe_d141e0_idx'),
        ),
        migrations.AddIndex(
            model_name='vacation',
            index=models.Index(fields=['start_date', 'end_date'], name='hr_vacation_start_d_2870c4_idx'),
        ),
        migrations.AddIndex(
            model_name='timerecord',
            index=models.Index(fields=['employee', 'record_date'], name='hr_time_rec_employe_98ebba_idx'),
        ),
        migrations.AddIndex(
            model_name='timerecord',
            index=models.Index(fields=['record_date', 'is_approved'], name='hr_time_rec_record__f1d0fa_idx'),
        ),
        migrations.AddIndex(
            model_name='performancereview',
            index=models.Index(fields=['employee', 'status'], name='hr_performa_employe_1018de_idx'),
        ),
        migrations.AddIndex(
            model_name='performancereview',
            index=models.Index(fields=['reviewer', 'status'], name='hr_performa_reviewe_1adcf6_idx'),
        ),
        migrations.AddIndex(
            model_name='payroll',
            index=models.Index(fields=['employee', 'year', 'month'], name='hr_payrolls_employe_c586ee_idx'),
        ),
        migrations.AddIndex(
            model_name='payroll',
            index=models.Index(fields=['is_processed', 'year', 'month'], name='hr_payrolls_is_proc_54f8e1_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='payroll',
            unique_together={('employee', 'month', 'year')},
        ),
        migrations.AddIndex(
            model_name='jobopening',
            index=models.Index(fields=['status', 'posted_date'], name='hr_job_open_status_e3015f_idx'),
        ),
        migrations.AddIndex(
            model_name='jobopening',
            index=models.Index(fields=['department', 'status'], name='hr_job_open_departm_164d7c_idx'),
        ),
        migrations.AddIndex(
            model_name='employeetraining',
            index=models.Index(fields=['employee', 'status'], name='hr_employee_employe_5b36f3_idx'),
        ),
        migrations.AddIndex(
            model_name='employeetraining',
            index=models.Index(fields=['training', 'status'], name='hr_employee_trainin_2351c2_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='employeetraining',
            unique_together={('employee', 'training')},
        ),
        migrations.AddIndex(
            model_name='employeebenefit',
            index=models.Index(fields=['employee', 'is_active'], name='hr_employee_employe_0a77e3_idx'),
        ),
        migrations.AddIndex(
            model_name='employeebenefit',
            index=models.Index(fields=['benefit', 'is_active'], name='hr_employee_benefit_83ffe8_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='employeebenefit',
            unique_together={('employee', 'benefit', 'start_date')},
        ),
        migrations.AddIndex(
            model_name='candidate',
            index=models.Index(fields=['job_opening', 'status'], name='hr_candidat_job_ope_1fd0e2_idx'),
        ),
        migrations.AddIndex(
            model_name='candidate',
            index=models.Index(fields=['status', 'applied_at'], name='hr_candidat_status_39bc34_idx'),
        ),
    ]
