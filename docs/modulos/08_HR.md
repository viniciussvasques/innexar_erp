# üë• M√≥dulo de Recursos Humanos (HR)

**√öltima atualiza√ß√£o:** 2025-11-14  
**Status:** ‚úÖ 100% Implementado  
**Progresso:** 100% (57 de 57 endpoints)

---

## üìã √çndice

1. [Vis√£o Geral](#vis√£o-geral)
2. [Funcionalidades](#funcionalidades)
3. [Modelos/Entidades](#modelosentidades)
4. [APIs/Endpoints](#apisendpoints)
5. [Fluxos de Trabalho](#fluxos-de-trabalho)
6. [Regras de Neg√≥cio](#regras-de-neg√≥cio)
7. [Permiss√µes](#permiss√µes)
8. [Status de Implementa√ß√£o](#status-de-implementa√ß√£o)
9. [Notas T√©cnicas](#notas-t√©cnicas)

---

## üéØ Vis√£o Geral

O m√≥dulo de Recursos Humanos (HR) gerencia todos os aspectos relacionados aos funcion√°rios da empresa, incluindo cadastro, folha de pagamento, controle de ponto, benef√≠cios, avalia√ß√µes de desempenho, treinamentos e recrutamento.

### Objetivos Principais

- Gerenciar cadastro completo de funcion√°rios
- Controlar folha de pagamento
- Gerenciar controle de ponto e f√©rias
- Administrar benef√≠cios
- Realizar avalia√ß√µes de desempenho
- Gerenciar treinamentos e certifica√ß√µes
- Processo de recrutamento e sele√ß√£o

---

## üöÄ Funcionalidades

### 1. Cadastro de Funcion√°rios

#### 1.1 Dados Pessoais

- Nome completo
- Data de nascimento
- CPF/SSN
- RG/ID
- Estado civil
- Nacionalidade
- Endere√ßo completo
- Contatos (telefone, email, emerg√™ncia)

#### 1.2 Dados Profissionais

- Cargo/Fun√ß√£o
- Departamento
- Warehouse atribu√≠do (se aplic√°vel)
- Data de admiss√£o
- Data de demiss√£o (se aplic√°vel)
- Tipo de contrato (CLT, PJ, W2, 1099, LLC, S-Corp, etc.)
- **Contrata√ß√£o:**
  - Contratado como pessoa f√≠sica (W2 Employee)
  - Contratado via empresa da pessoa (1099 Contractor, LLC, S-Corp)
  - Empresa vinculada (se contratado via empresa)
- Sal√°rio base
- Comiss√µes (se aplic√°vel)
- Supervisor/Gerente

#### 1.3 Documentos

- Carteira de trabalho
- Certid√µes
- Diplomas
- Certifica√ß√µes
- Contratos
- Upload de arquivos

#### 1.4 Hist√≥rico

- Hist√≥rico de cargos
- Hist√≥rico de sal√°rios
- Hist√≥rico de departamentos
- Promo√ß√µes
- Transfer√™ncias

### 2. Folha de Pagamento

#### 2.1 C√°lculo de Folha

- **Proventos:**

  - Sal√°rio base
  - Comiss√µes
  - Horas extras
  - Adicionais
  - Bonifica√ß√µes
  - Benef√≠cios (vale refei√ß√£o, etc.)

- **Descontos:**

  - INSS
  - IRRF
  - Vale transporte
  - Vale refei√ß√£o (desconto)
  - Empr√©stimos
  - Adiantamentos
  - Outros descontos

- **C√°lculos Autom√°ticos:**
  - INSS (tabela atualizada)
  - IRRF (tabela progressiva)
  - FGTS
  - 13¬∫ sal√°rio (proporcional)
  - F√©rias proporcionais

#### 2.2 Gera√ß√£o de Folha

- Processamento mensal
- Gera√ß√£o de holerites
- Envio por email
- Exporta√ß√£o para contabilidade
- Hist√≥rico completo

#### 2.3 Relat√≥rios

- Folha por departamento
- Folha por warehouse
- Custos totais
- Comparativo mensal
- Proje√ß√µes

### 3. Controle de Ponto

#### 3.1 Registro de Ponto

- **M√©todos:**

  - Rel√≥gio ponto f√≠sico
  - App mobile
  - Web
  - Integra√ß√£o com sistema externo

- **Tipos de Registro:**
  - Entrada
  - Sa√≠da
  - Entrada almo√ßo
  - Sa√≠da almo√ßo
  - Horas extras
  - Compensa√ß√£o

#### 3.2 Aprova√ß√£o

- Supervisor aprova pontos
- Corre√ß√µes
- Justificativas
- Atrasos e faltas

#### 3.3 Relat√≥rios

- Horas trabalhadas
- Horas extras
- Faltas
- Atrasos
- Banco de horas

### 4. F√©rias

#### 4.1 Gest√£o de F√©rias

- Solicita√ß√£o de f√©rias
- Aprova√ß√£o do supervisor
- C√°lculo de dias dispon√≠veis
- Per√≠odo aquisitivo
- Abono pecuni√°rio
- Venda de f√©rias

#### 4.2 Controle

- Saldo de f√©rias
- Hist√≥rico
- Alertas (f√©rias vencendo)
- Planejamento

### 5. Benef√≠cios

#### 5.1 Tipos de Benef√≠cios

- Vale refei√ß√£o
- Vale alimenta√ß√£o
- Vale transporte
- Plano de sa√∫de
- Plano odontol√≥gico
- Seguro de vida
- Aux√≠lio creche
- Gympass
- Outros

#### 5.2 Gest√£o

- Cadastro de benef√≠cios
- Atribui√ß√£o a funcion√°rios
- Valores e limites
- Renova√ß√£o
- Cancelamento

### 6. Avalia√ß√£o de Desempenho

#### 6.1 Processo de Avalia√ß√£o

- Criar avalia√ß√£o
- Definir crit√©rios
- Avaliar funcion√°rio
- Autoavalia√ß√£o
- Avalia√ß√£o 360¬∞ (opcional)
- Feedback
- Plano de desenvolvimento

#### 6.2 M√©tricas

- KPIs por funcion√°rio
- Metas
- Resultados
- Hist√≥rico de avalia√ß√µes

### 7. Treinamentos

#### 7.1 Gest√£o de Treinamentos

- Cadastro de treinamentos
- Inscri√ß√µes
- Controle de presen√ßa
- Certificados
- Validade de certifica√ß√µes

#### 7.2 Hist√≥rico

- Treinamentos realizados
- Certifica√ß√µes
- Compet√™ncias
- Necessidades de treinamento

### 8. Recrutamento e Sele√ß√£o

#### 8.1 Vagas

- Cadastro de vagas
- Requisitos
- Descri√ß√£o
- Sal√°rio
- Status (aberta, fechada)

#### 8.2 Candidatos

- Cadastro de candidatos
- Curr√≠culo
- Entrevistas
- Avalia√ß√µes
- Status (em an√°lise, aprovado, rejeitado)

#### 8.3 Processo

- Pipeline de recrutamento
- Etapas (triagem, entrevista, teste, etc.)
- Feedback
- Contrata√ß√£o

---

## üóÑÔ∏è Modelos/Entidades

### Employee

```python
class Employee(models.Model):
    """Funcion√°rio"""

    STATUS_CHOICES = [
        ('active', 'Ativo'),
        ('on_leave', 'Afastado'),
        ('terminated', 'Demitido'),
        ('resigned', 'Pediu Demiss√£o'),
    ]

    CONTRACT_TYPE_CHOICES = [
        ('w2_employee', 'W2 Employee (Pessoa F√≠sica)'),
        ('1099_contractor', '1099 Contractor (Empresa)'),
        ('llc', 'LLC'),
        ('s_corp', 'S-Corp'),
        ('c_corp', 'C-Corp'),
        ('partnership', 'Partnership'),
        ('clt', 'CLT (Brasil)'),
        ('pj', 'PJ (Brasil)'),
        ('intern', 'Estagi√°rio'),
        ('temporary', 'Tempor√°rio'),
    ]

    HIRE_TYPE_CHOICES = [
        ('individual', 'Pessoa F√≠sica'),
        ('company', 'Via Empresa'),
    ]

    # Relacionamento com User
    user = models.OneToOneField('users.User', on_delete=models.CASCADE, related_name='employee')

    # Dados Pessoais
    employee_number = models.CharField(max_length=20, unique=True)
    date_of_birth = models.DateField(null=True, blank=True)
    cpf = models.CharField(max_length=14, blank=True)
    ssn = models.CharField(max_length=11, blank=True)  # USA
    rg = models.CharField(max_length=20, blank=True)
    marital_status = models.CharField(max_length=20, blank=True)
    nationality = models.CharField(max_length=50, default='Brasileiro')

    # Endere√ßo
    address = models.TextField(blank=True)
    city = models.CharField(max_length=100, blank=True)
    state = models.CharField(max_length=100, blank=True)
    zip_code = models.CharField(max_length=20, blank=True)
    country = models.CharField(max_length=100, default='Brasil')

    # Contatos de Emerg√™ncia
    emergency_contact_name = models.CharField(max_length=255, blank=True)
    emergency_contact_phone = models.CharField(max_length=20, blank=True)
    emergency_contact_relation = models.CharField(max_length=50, blank=True)

    # Dados Profissionais
    job_title = models.CharField(max_length=100)
    department = models.ForeignKey('hr.Department', on_delete=models.SET_NULL, null=True)
    warehouse = models.ForeignKey('warehouse.Warehouse', on_delete=models.SET_NULL, null=True, blank=True)
    supervisor = models.ForeignKey('self', on_delete=models.SET_NULL, null=True, blank=True, related_name='subordinates')

    # Contrato
    contract_type = models.CharField(max_length=20, choices=CONTRACT_TYPE_CHOICES, default='w2_employee')
    hire_type = models.CharField(max_length=20, choices=HIRE_TYPE_CHOICES, default='individual')

    # Empresa vinculada (se contratado via empresa)
    company = models.ForeignKey(
        'hr.Company',
        on_delete=models.SET_NULL,
        null=True,
        blank=True,
        related_name='employees',
        help_text='Empresa da pessoa (se contratado via empresa)'
    )

    hire_date = models.DateField()
    termination_date = models.DateField(null=True, blank=True)

    # Sal√°rio
    base_salary = models.DecimalField(max_digits=15, decimal_places=2)
    commission_percent = models.DecimalField(max_digits=5, decimal_places=2, default=0)

    # Status
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='active')

    # Metadados
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'hr_employees'
        ordering = ['user__first_name', 'user__last_name']
        indexes = [
            models.Index(fields=['employee_number']),
            models.Index(fields=['department', 'status']),
            models.Index(fields=['warehouse', 'status']),
        ]

    def __str__(self):
        return f"{self.employee_number} - {self.user.get_full_name()}"
```

### Department

```python
class Department(models.Model):
    """Departamento"""

    name = models.CharField(max_length=100, unique=True)
    code = models.CharField(max_length=20, unique=True)
    description = models.TextField(blank=True)

    # Gerente
    manager = models.ForeignKey(
        'hr.Employee',
        on_delete=models.SET_NULL,
        null=True,
        related_name='managed_departments'
    )

    # Status
    is_active = models.BooleanField(default=True)

    class Meta:
        db_table = 'hr_departments'
        ordering = ['name']

    def __str__(self):
        return self.name
```

### Company

```python
class Company(models.Model):
    """Empresa da Pessoa (LLC, S-Corp, etc.)"""

    TYPE_CHOICES = [
        ('llc', 'LLC (Limited Liability Company)'),
        ('s_corp', 'S-Corporation'),
        ('c_corp', 'C-Corporation'),
        ('partnership', 'Partnership'),
        ('sole_proprietorship', 'Sole Proprietorship'),
        ('other', 'Outro'),
    ]

    # Dados da Empresa
    legal_name = models.CharField(max_length=255)
    trade_name = models.CharField(max_length=255, blank=True)
    company_type = models.CharField(max_length=30, choices=TYPE_CHOICES)

    # EIN (Employer Identification Number)
    ein = models.CharField(max_length=20, unique=True, help_text='EIN da empresa')

    # Endere√ßo
    address = models.TextField()
    city = models.CharField(max_length=100)
    state = models.CharField(max_length=100)
    zip_code = models.CharField(max_length=20)
    country = models.CharField(max_length=100, default='USA')

    # Contato
    phone = models.CharField(max_length=20, blank=True)
    email = models.EmailField(blank=True)
    website = models.URLField(blank=True)

    # Propriet√°rio (pessoa f√≠sica)
    owner = models.ForeignKey(
        'hr.Employee',
        on_delete=models.CASCADE,
        related_name='owned_companies',
        help_text='Pessoa f√≠sica propriet√°ria da empresa'
    )

    # Status
    is_active = models.BooleanField(default=True)

    # Metadados
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'hr_companies'
        ordering = ['legal_name']
        verbose_name_plural = 'Companies'
        indexes = [
            models.Index(fields=['ein']),
            models.Index(fields=['owner', 'is_active']),
        ]

    def __str__(self):
        return f"{self.legal_name} ({self.ein})"
```

### Payroll

```python
class Payroll(models.Model):
    """Folha de Pagamento"""

    payroll_number = models.CharField(max_length=50, unique=True)

    # Per√≠odo
    month = models.IntegerField()  # 1-12
    year = models.IntegerField()

    # Funcion√°rio
    employee = models.ForeignKey('hr.Employee', on_delete=models.PROTECT, related_name='payrolls')

    # Proventos
    base_salary = models.DecimalField(max_digits=15, decimal_places=2)
    commissions = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    overtime = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    bonuses = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    benefits_value = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    total_earnings = models.DecimalField(max_digits=15, decimal_places=2)  # Calculado

    # Descontos
    inss = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    irrf = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    fgts = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    transportation = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    meal_voucher = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    loans = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    advances = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    other_deductions = models.DecimalField(max_digits=15, decimal_places=2, default=0)
    total_deductions = models.DecimalField(max_digits=15, decimal_places=2)  # Calculado

    # Total
    net_salary = models.DecimalField(max_digits=15, decimal_places=2)  # total_earnings - total_deductions

    # Status
    is_processed = models.BooleanField(default=False)
    processed_at = models.DateTimeField(null=True, blank=True)

    # Metadados
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'hr_payrolls'
        unique_together = ['employee', 'month', 'year']
        ordering = ['-year', '-month']

    def __str__(self):
        return f"{self.payroll_number} - {self.employee.user.get_full_name()}"
```

### TimeRecord

```python
class TimeRecord(models.Model):
    """Registro de Ponto"""

    TYPE_CHOICES = [
        ('check_in', 'Entrada'),
        ('check_out', 'Sa√≠da'),
        ('lunch_in', 'Entrada Almo√ßo'),
        ('lunch_out', 'Sa√≠da Almo√ßo'),
        ('overtime_in', 'Entrada Hora Extra'),
        ('overtime_out', 'Sa√≠da Hora Extra'),
    ]

    employee = models.ForeignKey('hr.Employee', on_delete=models.CASCADE, related_name='time_records')
    record_type = models.CharField(max_length=20, choices=TYPE_CHOICES)
    record_date = models.DateField()
    record_time = models.TimeField()

    # Localiza√ß√£o (se app mobile)
    latitude = models.DecimalField(max_digits=9, decimal_places=6, null=True, blank=True)
    longitude = models.DecimalField(max_digits=9, decimal_places=6, null=True, blank=True)

    # Aprova√ß√£o
    is_approved = models.BooleanField(default=False)
    approved_by = models.ForeignKey('users.User', on_delete=models.SET_NULL, null=True, blank=True)
    approved_at = models.DateTimeField(null=True, blank=True)

    # Justificativa (se atraso/falta)
    justification = models.TextField(blank=True)

    # Metadados
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        db_table = 'hr_time_records'
        ordering = ['-record_date', '-record_time']
        indexes = [
            models.Index(fields=['employee', 'record_date']),
        ]

    def __str__(self):
        return f"{self.employee.user.get_full_name()} - {self.record_date} {self.record_time}"
```

### Vacation

```python
class Vacation(models.Model):
    """F√©rias"""

    STATUS_CHOICES = [
        ('requested', 'Solicitada'),
        ('approved', 'Aprovada'),
        ('rejected', 'Rejeitada'),
        ('taken', 'Gozada'),
        ('cancelled', 'Cancelada'),
    ]

    employee = models.ForeignKey('hr.Employee', on_delete=models.CASCADE, related_name='vacations')
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='requested')

    # Per√≠odo
    start_date = models.DateField()
    end_date = models.DateField()
    days = models.IntegerField()  # Calculado

    # Per√≠odo Aquisitivo
    acquisition_period_start = models.DateField()
    acquisition_period_end = models.DateField()

    # Abono
    sell_days = models.IntegerField(default=0)  # Venda de f√©rias
    cash_allowance = models.BooleanField(default=False)  # Abono pecuni√°rio

    # Aprova√ß√£o
    approved_by = models.ForeignKey('users.User', on_delete=models.SET_NULL, null=True, blank=True)
    approved_at = models.DateTimeField(null=True, blank=True)
    rejection_reason = models.TextField(blank=True)

    # Metadados
    requested_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'hr_vacations'
        ordering = ['-start_date']

    def __str__(self):
        return f"{self.employee.user.get_full_name()} - {self.start_date} a {self.end_date}"
```

### Benefit

```python
class Benefit(models.Model):
    """Benef√≠cio"""

    TYPE_CHOICES = [
        ('meal_voucher', 'Vale Refei√ß√£o'),
        ('food_voucher', 'Vale Alimenta√ß√£o'),
        ('transportation', 'Vale Transporte'),
        ('health_insurance', 'Plano de Sa√∫de'),
        ('dental_insurance', 'Plano Odontol√≥gico'),
        ('life_insurance', 'Seguro de Vida'),
        ('daycare', 'Aux√≠lio Creche'),
        ('gympass', 'Gympass'),
        ('other', 'Outro'),
    ]

    name = models.CharField(max_length=100)
    benefit_type = models.CharField(max_length=30, choices=TYPE_CHOICES)
    description = models.TextField(blank=True)

    # Valor
    value = models.DecimalField(max_digits=15, decimal_places=2, null=True, blank=True)
    limit = models.DecimalField(max_digits=15, decimal_places=2, null=True, blank=True)

    # Status
    is_active = models.BooleanField(default=True)

    class Meta:
        db_table = 'hr_benefits'
        ordering = ['name']

    def __str__(self):
        return self.name
```

### EmployeeBenefit

```python
class EmployeeBenefit(models.Model):
    """Benef√≠cio do Funcion√°rio"""

    employee = models.ForeignKey('hr.Employee', on_delete=models.CASCADE, related_name='benefits')
    benefit = models.ForeignKey('hr.Benefit', on_delete=models.CASCADE)

    # Valor (pode ser diferente do padr√£o)
    value = models.DecimalField(max_digits=15, decimal_places=2, null=True, blank=True)

    # Datas
    start_date = models.DateField()
    end_date = models.DateField(null=True, blank=True)

    # Status
    is_active = models.BooleanField(default=True)

    class Meta:
        db_table = 'hr_employee_benefits'
        unique_together = ['employee', 'benefit', 'start_date']

    def __str__(self):
        return f"{self.employee.user.get_full_name()} - {self.benefit.name}"
```

### PerformanceReview

```python
class PerformanceReview(models.Model):
    """Avalia√ß√£o de Desempenho"""

    STATUS_CHOICES = [
        ('draft', 'Rascunho'),
        ('in_progress', 'Em Andamento'),
        ('completed', 'Conclu√≠da'),
        ('cancelled', 'Cancelada'),
    ]

    employee = models.ForeignKey('hr.Employee', on_delete=models.CASCADE, related_name='performance_reviews')
    reviewer = models.ForeignKey('hr.Employee', on_delete=models.CASCADE, related_name='reviews_given')

    # Per√≠odo
    review_period_start = models.DateField()
    review_period_end = models.DateField()
    review_date = models.DateField()

    # Status
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='draft')

    # Crit√©rios e Notas
    criteria_scores = models.JSONField(default=dict)  # {criterion: score}
    overall_score = models.DecimalField(max_digits=5, decimal_places=2, null=True)

    # Feedback
    strengths = models.TextField(blank=True)
    areas_for_improvement = models.TextField(blank=True)
    goals = models.TextField(blank=True)
    development_plan = models.TextField(blank=True)

    # Metadados
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        db_table = 'hr_performance_reviews'
        ordering = ['-review_date']

    def __str__(self):
        return f"{self.employee.user.get_full_name()} - {self.review_date}"
```

### Training

```python
class Training(models.Model):
    """Treinamento"""

    name = models.CharField(max_length=255)
    description = models.TextField(blank=True)
    training_type = models.CharField(max_length=50)  # interno, externo, online

    # Datas
    start_date = models.DateField()
    end_date = models.DateField()
    duration_hours = models.IntegerField()

    # Instrutor
    instructor = models.CharField(max_length=255, blank=True)

    # Status
    is_active = models.BooleanField(default=True)

    class Meta:
        db_table = 'hr_trainings'
        ordering = ['-start_date']

    def __str__(self):
        return self.name
```

### EmployeeTraining

```python
class EmployeeTraining(models.Model):
    """Treinamento do Funcion√°rio"""

    STATUS_CHOICES = [
        ('enrolled', 'Inscrito'),
        ('completed', 'Conclu√≠do'),
        ('failed', 'Reprovado'),
        ('cancelled', 'Cancelado'),
    ]

    employee = models.ForeignKey('hr.Employee', on_delete=models.CASCADE, related_name='trainings')
    training = models.ForeignKey('hr.Training', on_delete=models.CASCADE)

    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='enrolled')

    # Nota (se aplic√°vel)
    score = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)

    # Certificado
    certificate_number = models.CharField(max_length=100, blank=True)
    certificate_file = models.FileField(upload_to='certificates/', blank=True)
    certificate_expiry = models.DateField(null=True, blank=True)

    # Datas
    enrolled_at = models.DateTimeField(auto_now_add=True)
    completed_at = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'hr_employee_trainings'
        unique_together = ['employee', 'training']

    def __str__(self):
        return f"{self.employee.user.get_full_name()} - {self.training.name}"
```

### JobOpening

```python
class JobOpening(models.Model):
    """Vaga de Emprego"""

    STATUS_CHOICES = [
        ('open', 'Aberta'),
        ('closed', 'Fechada'),
        ('cancelled', 'Cancelada'),
    ]

    title = models.CharField(max_length=255)
    department = models.ForeignKey('hr.Department', on_delete=models.SET_NULL, null=True)
    warehouse = models.ForeignKey('warehouse.Warehouse', on_delete=models.SET_NULL, null=True, blank=True)

    # Descri√ß√£o
    description = models.TextField()
    requirements = models.TextField()
    responsibilities = models.TextField()

    # Remunera√ß√£o
    salary_min = models.DecimalField(max_digits=15, decimal_places=2, null=True, blank=True)
    salary_max = models.DecimalField(max_digits=15, decimal_places=2, null=True, blank=True)

    # Status
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='open')

    # Datas
    posted_date = models.DateField(auto_now_add=True)
    closing_date = models.DateField(null=True, blank=True)

    class Meta:
        db_table = 'hr_job_openings'
        ordering = ['-posted_date']

    def __str__(self):
        return self.title
```

### Candidate

```python
class Candidate(models.Model):
    """Candidato"""

    STATUS_CHOICES = [
        ('applied', 'Candidatou-se'),
        ('screening', 'Triagem'),
        ('interview', 'Entrevista'),
        ('test', 'Teste'),
        ('approved', 'Aprovado'),
        ('rejected', 'Rejeitado'),
        ('hired', 'Contratado'),
    ]

    # Dados Pessoais
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    email = models.EmailField()
    phone = models.CharField(max_length=20, blank=True)

    # Vaga
    job_opening = models.ForeignKey('hr.JobOpening', on_delete=models.CASCADE, related_name='candidates')

    # Curr√≠culo
    resume_file = models.FileField(upload_to='resumes/', blank=True)
    cover_letter = models.TextField(blank=True)

    # Status
    status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='applied')

    # Avalia√ß√µes
    interview_notes = models.TextField(blank=True)
    test_score = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)
    overall_rating = models.IntegerField(null=True, blank=True)  # 1-5

    # Datas
    applied_at = models.DateTimeField(auto_now_add=True)
    interview_date = models.DateTimeField(null=True, blank=True)

    class Meta:
        db_table = 'hr_candidates'
        ordering = ['-applied_at']

    def __str__(self):
        return f"{self.first_name} {self.last_name} - {self.job_opening.title}"
```

---

## üîå APIs/Endpoints

### Base URL

```
/api/v1/hr/
```

### Endpoints

#### Employees

```http
GET /api/v1/hr/employees/
Authorization: Bearer {access_token}
```

**Query Parameters:**

- `department_id` - Filtrar por departamento
- `warehouse_id` - Filtrar por warehouse
- `status` - Filtrar por status
- `search` - Busca textual

```http
POST /api/v1/hr/employees/
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "user_id": 1,
  "employee_number": "EMP-001",
  "job_title": "Vendedor",
  "department_id": 1,
  "warehouse_id": 1,
  "hire_date": "2025-01-15",
  "base_salary": 3000.00,
  "contract_type": "clt"
}
```

#### Payroll

```http
GET /api/v1/hr/payroll/
Authorization: Bearer {access_token}
```

**Query Parameters:**

- `employee_id` - Filtrar por funcion√°rio
- `month` - Filtrar por m√™s
- `year` - Filtrar por ano

```http
POST /api/v1/hr/payroll/process/
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "month": 11,
  "year": 2025,
  "department_id": 1  # Opcional, processar apenas departamento
}
```

**Processa folha de pagamento**

#### Time Records

```http
GET /api/v1/hr/time-records/
Authorization: Bearer {access_token}
```

**Query Parameters:**

- `employee_id` - Filtrar por funcion√°rio
- `date_from` - Data inicial
- `date_to` - Data final

```http
POST /api/v1/hr/time-records/
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "employee_id": 1,
  "record_type": "check_in",
  "record_date": "2025-11-14",
  "record_time": "08:00:00"
}
```

**Mobile app registra ponto**

#### Vacations

```http
GET /api/v1/hr/vacations/
Authorization: Bearer {access_token}
```

```http
POST /api/v1/hr/vacations/
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "employee_id": 1,
  "start_date": "2025-12-01",
  "end_date": "2025-12-15",
  "sell_days": 0,
  "cash_allowance": false
}
```

```http
POST /api/v1/hr/vacations/{id}/approve/
Authorization: Bearer {access_token}
```

#### Benefits

```http
GET /api/v1/hr/benefits/
Authorization: Bearer {access_token}
```

```http
POST /api/v1/hr/employee-benefits/
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "employee_id": 1,
  "benefit_id": 1,
  "start_date": "2025-11-01",
  "value": 500.00
}
```

#### Performance Reviews

```http
GET /api/v1/hr/performance-reviews/
Authorization: Bearer {access_token}
```

```http
POST /api/v1/hr/performance-reviews/
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "employee_id": 1,
  "reviewer_id": 2,
  "review_period_start": "2025-01-01",
  "review_period_end": "2025-12-31",
  "review_date": "2025-12-15",
  "criteria_scores": {
    "productivity": 4.5,
    "quality": 4.0,
    "teamwork": 5.0
  },
  "strengths": "Excelente trabalho em equipe",
  "areas_for_improvement": "Melhorar produtividade"
}
```

#### Trainings

```http
GET /api/v1/hr/trainings/
Authorization: Bearer {access_token}
```

```http
POST /api/v1/hr/trainings/{id}/enroll/
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "employee_id": 1
}
```

#### Job Openings

```http
GET /api/v1/hr/job-openings/
Authorization: Bearer {access_token}
```

```http
POST /api/v1/hr/job-openings/
Authorization: Bearer {access_token}
Content-Type: application/json

{
  "title": "Vendedor",
  "department_id": 1,
  "description": "Descri√ß√£o da vaga",
  "requirements": "Requisitos",
  "salary_min": 3000.00,
  "salary_max": 5000.00
}
```

#### Candidates

```http
GET /api/v1/hr/candidates/
Authorization: Bearer {access_token}
```

**Query Parameters:**

- `job_opening_id` - Filtrar por vaga
- `status` - Filtrar por status

```http
POST /api/v1/hr/candidates/
Authorization: Bearer {access_token}
Content-Type: multipart/form-data

{
  "first_name": "Jo√£o",
  "last_name": "Silva",
  "email": "joao@example.com",
  "phone": "+5511999999999",
  "job_opening_id": 1,
  "resume_file": <file>,
  "cover_letter": "Carta de apresenta√ß√£o"
}
```

---

## üîÑ Fluxos de Trabalho

### Fluxo 1: Processamento de Folha

```
1. In√≠cio do m√™s
   ‚Üì
2. HR inicia processamento
   ‚Üì
3. Para cada funcion√°rio ativo:
   - Calcula proventos
   - Calcula descontos
   - Calcula l√≠quido
   ‚Üì
4. Gera holerite
   ‚Üì
5. Envia por email
   ‚Üì
6. Exporta para contabilidade
```

### Fluxo 2: Solicita√ß√£o de F√©rias

```
1. Funcion√°rio solicita f√©rias
   ‚Üì
2. Sistema valida:
   - Saldo dispon√≠vel
   - Per√≠odo aquisitivo
   ‚Üì
3. Envia para aprova√ß√£o do supervisor
   ‚Üì
4. Supervisor aprova/rejeita
   ‚Üì
5. Se aprovado:
   - Registra f√©rias
   - Atualiza saldo
   - Notifica funcion√°rio
```

### Fluxo 3: Recrutamento

```
1. Criar vaga
   ‚Üì
2. Publicar vaga
   ‚Üì
3. Candidatos se inscrevem
   ‚Üì
4. Triagem inicial
   ‚Üì
5. Entrevista
   ‚Üì
6. Teste (se aplic√°vel)
   ‚Üì
7. Avalia√ß√£o
   ‚Üì
8. Aprova√ß√£o/Rejei√ß√£o
   ‚Üì
9. Se aprovado ‚Üí Contrata√ß√£o
```

---

## üìê Regras de Neg√≥cio

### 1. Folha de Pagamento

- **INSS:**

  - Tabela atualizada anualmente
  - Al√≠quotas progressivas
  - Teto de contribui√ß√£o

- **IRRF:**

  - Tabela progressiva
  - Dedu√ß√£o por dependente
  - Isen√ß√£o at√© valor X

- **FGTS:**
  - 8% sobre sal√°rio
  - Depositado mensalmente

### 2. F√©rias

- 30 dias por per√≠odo aquisitivo (12 meses)
- Pode vender at√© 10 dias
- Abono pecuni√°rio: 1/3 do valor
- F√©rias vencendo: alertar 30 dias antes

### 3. Controle de Ponto

- Jornada padr√£o: 8 horas/dia
- Horas extras: +50% (dias √∫teis), +100% (domingos/feriados)
- Banco de horas: compensa√ß√£o
- Atrasos: descontar do sal√°rio

### 4. Benef√≠cios

- Vale refei√ß√£o: isento de IR at√© valor X
- Vale transporte: descontado do sal√°rio
- Plano de sa√∫de: empresa paga X%, funcion√°rio Y%

---

## üîê Permiss√µes

### Funcion√°rio

- ‚úÖ Ver pr√≥prio cadastro
- ‚úÖ Ver pr√≥pria folha
- ‚úÖ Ver pr√≥prio ponto
- ‚úÖ Solicitar f√©rias
- ‚úÖ Ver pr√≥prios benef√≠cios
- ‚úÖ Ver pr√≥prias avalia√ß√µes
- ‚ùå Ver dados de outros funcion√°rios

### Supervisor

- ‚úÖ Ver funcion√°rios da equipe
- ‚úÖ Aprovar pontos da equipe
- ‚úÖ Aprovar f√©rias da equipe
- ‚úÖ Avaliar funcion√°rios da equipe
- ‚ùå Ver sal√°rios

### Gerente de RH

- ‚úÖ Ver todos os funcion√°rios
- ‚úÖ Processar folha
- ‚úÖ Ver sal√°rios
- ‚úÖ Gerenciar benef√≠cios
- ‚úÖ Gerenciar recrutamento

---

## ‚úÖ Status de Implementa√ß√£o

### ‚úÖ Funcion√°rios (IMPLEMENTADO)

- [x] Modelo Employee
- [x] Modelo Company (empresa da pessoa)
- [x] Modelo Department
- [x] Suporte a contrata√ß√£o via empresa (LLC, S-Corp, etc.)
- [x] CRUD de funcion√°rios (7 endpoints)
- [x] CRUD de empresas (6 endpoints)
- [x] CRUD de departamentos (6 endpoints)
- [ ] Hist√≥rico de cargos/sal√°rios
- [ ] Upload de documentos

### ‚úÖ Folha de Pagamento (IMPLEMENTADO)

- [x] Modelo Payroll
- [x] C√°lculo de proventos (total_earnings)
- [x] C√°lculo de descontos (total_deductions)
- [x] C√°lculo de sal√°rio l√≠quido (net_salary)
- [x] Gera√ß√£o autom√°tica de payroll_number
- [x] Processamento de folha (a√ß√£o process)
- [ ] Tabelas INSS/IRRF (valores fixos por enquanto)
- [ ] Gera√ß√£o de holerites (PDF)
- [ ] Exporta√ß√£o cont√°bil

### ‚úÖ Controle de Ponto (IMPLEMENTADO)

- [x] Modelo TimeRecord
- [x] CRUD completo de registros de ponto
- [x] Aprova√ß√£o de pontos (a√ß√£o approve)
- [x] Tipos de registro (check_in, check_out, lunch_in, lunch_out, overtime_in, overtime_out)
- [x] Geolocaliza√ß√£o (latitude, longitude)
- [ ] C√°lculo autom√°tico de horas
- [ ] Relat√≥rios

### ‚úÖ F√©rias (IMPLEMENTADO)

- [x] Modelo Vacation
- [x] Solicita√ß√£o de f√©rias
- [x] Aprova√ß√£o de f√©rias (a√ß√£o approve)
- [x] Rejei√ß√£o de f√©rias (a√ß√£o reject)
- [x] Per√≠odo aquisitivo
- [x] Venda de dias
- [ ] C√°lculo autom√°tico de saldo
- [ ] Alertas

### ‚úÖ Benef√≠cios (IMPLEMENTADO)

- [x] Modelo Benefit
- [x] Modelo EmployeeBenefit
- [x] CRUD completo de benef√≠cios
- [x] Atribui√ß√£o a funcion√°rios
- [x] Tipos de benef√≠cios (meal_voucher, food_voucher, transportation, health_insurance, etc.)

### ‚úÖ Avalia√ß√£o de Desempenho (IMPLEMENTADO)

- [x] Modelo PerformanceReview
- [x] Cria√ß√£o de avalia√ß√£o
- [x] Crit√©rios customiz√°veis (criteria_scores JSONField)
- [x] Feedback (strengths, areas_for_improvement)
- [x] Metas e plano de desenvolvimento
- [x] Score geral

### ‚úÖ Treinamentos (IMPLEMENTADO)

- [x] Modelo Training
- [x] Modelo EmployeeTraining
- [x] Inscri√ß√µes (a√ß√£o enroll)
- [x] Certificados (emiss√£o e validade)
- [x] Tipos de treinamento (Internal, External, Online, Workshop, Seminar)

### ‚úÖ Recrutamento (IMPLEMENTADO)

- [x] Modelo JobOpening
- [x] Modelo Candidate
- [x] CRUD completo de vagas
- [x] CRUD completo de candidatos
- [x] Pipeline de recrutamento (status)
- [ ] Upload de curr√≠culos (campo resume existe, mas upload n√£o implementado)

### APIs

#### ‚úÖ Implementado (57 endpoints - 100%)

**Departments (6 endpoints):**

- [x] GET /api/v1/hr/departments/
- [x] POST /api/v1/hr/departments/
- [x] GET /api/v1/hr/departments/{id}/
- [x] PUT /api/v1/hr/departments/{id}/
- [x] PATCH /api/v1/hr/departments/{id}/
- [x] DELETE /api/v1/hr/departments/{id}/

**Companies (6 endpoints):**

- [x] GET /api/v1/hr/companies/
- [x] POST /api/v1/hr/companies/
- [x] GET /api/v1/hr/companies/{id}/
- [x] PUT /api/v1/hr/companies/{id}/
- [x] PATCH /api/v1/hr/companies/{id}/
- [x] DELETE /api/v1/hr/companies/{id}/

**Employees (7 endpoints):**

- [x] GET /api/v1/hr/employees/
- [x] POST /api/v1/hr/employees/
- [x] GET /api/v1/hr/employees/{id}/
- [x] PUT /api/v1/hr/employees/{id}/
- [x] PATCH /api/v1/hr/employees/{id}/
- [x] DELETE /api/v1/hr/employees/{id}/
- [x] GET /api/v1/hr/employees/by_user/?user_id={id}

**Benefits (6 endpoints):**

- [x] GET /api/v1/hr/benefits/
- [x] POST /api/v1/hr/benefits/
- [x] GET /api/v1/hr/benefits/{id}/
- [x] PUT /api/v1/hr/benefits/{id}/
- [x] PATCH /api/v1/hr/benefits/{id}/
- [x] DELETE /api/v1/hr/benefits/{id}/

**Employee Benefits (6 endpoints):**

- [x] GET /api/v1/hr/employee-benefits/
- [x] POST /api/v1/hr/employee-benefits/
- [x] GET /api/v1/hr/employee-benefits/{id}/
- [x] PUT /api/v1/hr/employee-benefits/{id}/
- [x] PATCH /api/v1/hr/employee-benefits/{id}/
- [x] DELETE /api/v1/hr/employee-benefits/{id}/

**Time Records (7 endpoints):**

- [x] GET /api/v1/hr/time-records/
- [x] POST /api/v1/hr/time-records/
- [x] GET /api/v1/hr/time-records/{id}/
- [x] PUT /api/v1/hr/time-records/{id}/
- [x] PATCH /api/v1/hr/time-records/{id}/
- [x] DELETE /api/v1/hr/time-records/{id}/
- [x] POST /api/v1/hr/time-records/{id}/approve/

**Vacations (8 endpoints):**

- [x] GET /api/v1/hr/vacations/
- [x] POST /api/v1/hr/vacations/
- [x] GET /api/v1/hr/vacations/{id}/
- [x] PUT /api/v1/hr/vacations/{id}/
- [x] PATCH /api/v1/hr/vacations/{id}/
- [x] DELETE /api/v1/hr/vacations/{id}/
- [x] POST /api/v1/hr/vacations/{id}/approve/
- [x] POST /api/v1/hr/vacations/{id}/reject/

**Performance Reviews (6 endpoints):**

- [x] GET /api/v1/hr/performance-reviews/
- [x] POST /api/v1/hr/performance-reviews/
- [x] GET /api/v1/hr/performance-reviews/{id}/
- [x] PUT /api/v1/hr/performance-reviews/{id}/
- [x] PATCH /api/v1/hr/performance-reviews/{id}/
- [x] DELETE /api/v1/hr/performance-reviews/{id}/

**Trainings (7 endpoints):**

- [x] GET /api/v1/hr/trainings/
- [x] POST /api/v1/hr/trainings/
- [x] GET /api/v1/hr/trainings/{id}/
- [x] PUT /api/v1/hr/trainings/{id}/
- [x] PATCH /api/v1/hr/trainings/{id}/
- [x] DELETE /api/v1/hr/trainings/{id}/
- [x] POST /api/v1/hr/trainings/{id}/enroll/

**Employee Trainings (2 endpoints):**

- [x] GET /api/v1/hr/employee-trainings/
- [x] GET /api/v1/hr/employee-trainings/{id}/

**Job Openings (6 endpoints):**

- [x] GET /api/v1/hr/job-openings/
- [x] POST /api/v1/hr/job-openings/
- [x] GET /api/v1/hr/job-openings/{id}/
- [x] PUT /api/v1/hr/job-openings/{id}/
- [x] PATCH /api/v1/hr/job-openings/{id}/
- [x] DELETE /api/v1/hr/job-openings/{id}/

**Candidates (6 endpoints):**

- [x] GET /api/v1/hr/candidates/
- [x] POST /api/v1/hr/candidates/
- [x] GET /api/v1/hr/candidates/{id}/
- [x] PUT /api/v1/hr/candidates/{id}/
- [x] PATCH /api/v1/hr/candidates/{id}/
- [x] DELETE /api/v1/hr/candidates/{id}/

**Payroll (3 endpoints):**

- [x] GET /api/v1/hr/payroll/
- [x] GET /api/v1/hr/payroll/{id}/
- [x] POST /api/v1/hr/payroll/process/

---

## üíª Notas T√©cnicas

### Folha de Pagamento

- **Tabelas:**

  - Manter tabelas INSS/IRRF atualizadas
  - Configur√°vel por ano
  - Versionamento de tabelas

- **Processamento:**
  - Background task (Celery)
  - Processar em lotes
  - Retry em caso de erro

### Controle de Ponto

- **Mobile App:**
  - GPS para validar localiza√ß√£o
  - Foto (opcional)
  - Offline support

### Seguran√ßa

- Dados sens√≠veis (sal√°rios) apenas para RH
- Criptografia de documentos
- Auditoria de acessos

---

**‚ö†Ô∏è IMPORTANTE:** Atualize este documento conforme a implementa√ß√£o progride!
