# ğŸ¯ Regras de Desenvolvimento - Innexar ERP Frontend

## ğŸ“‹ VISÃƒO GERAL

Este Ã© um projeto profissional de frontend para sistema ERP multi-tenant. Todas as regras abaixo devem ser seguidas rigorosamente.

## ğŸ—ï¸ ESTRUTURA DO PROJETO

### OrganizaÃ§Ã£o de Arquivos

1. **DocumentaÃ§Ã£o:** Todos os arquivos `.md` devem estar em `docs/`
   - ExceÃ§Ã£o: `README.md` na raiz
   - Criar `docs/CONTEXTO.md` e atualizar apÃ³s cada tarefa

2. **Testes:** Todos os testes em `tests/`
   - Estrutura espelha a estrutura do cÃ³digo
   - Exemplo: `components/ui/button.tsx` â†’ `tests/components/ui/button.test.tsx`

3. **ConfiguraÃ§Ãµes:** Arquivos de config na raiz
   - `.prettierrc`, `.eslintrc.json`, `jest.config.js`, etc.

### âš ï¸ IMPORTANTE: Arquitetura de DomÃ­nios

- **Cadastro (register)** existe APENAS no site institucional (`innexar.app`)
- **AplicaÃ§Ã£o tenant** (`{tenant}.innexar.app`) tem APENAS login
- NÃƒO criar pÃ¡gina `/register` na aplicaÃ§Ã£o tenant
- Sempre referenciar `https://innexar.app/register` quando necessÃ¡rio

## ğŸ“ PADRÃ•ES DE CÃ“DIGO

### TypeScript
- âœ… Sempre usar TypeScript strict mode
- âœ… Tipar todas as funÃ§Ãµes e componentes
- âœ… Usar interfaces para props de componentes
- âœ… Evitar `any` - usar `unknown` se necessÃ¡rio
- âœ… Usar tipos da API em `types/api.ts`

### React/Next.js
- âœ… Usar Server Components por padrÃ£o
- âœ… Marcar Client Components com `'use client'` apenas quando necessÃ¡rio
- âœ… Usar hooks customizados para lÃ³gica reutilizÃ¡vel
- âœ… Componentes devem ser pequenos e focados
- âœ… Props devem ser desestruturadas

### EstilizaÃ§Ã£o
- âœ… Usar TailwindCSS classes
- âœ… Usar `cn()` utility para combinar classes
- âœ… Seguir design system do shadcn/ui
- âœ… Responsive design mobile-first

### Nomenclatura
- âœ… Componentes: PascalCase (`Button.tsx`)
- âœ… Arquivos: camelCase para utils, PascalCase para componentes
- âœ… VariÃ¡veis/funÃ§Ãµes: camelCase
- âœ… Constantes: UPPER_SNAKE_CASE
- âœ… Types/Interfaces: PascalCase

## ğŸ§ª TESTES

### ObrigatÃ³rio
- âœ… Testes unitÃ¡rios para componentes UI
- âœ… Testes para hooks customizados
- âœ… Testes para utilitÃ¡rios
- âœ… Coverage mÃ­nimo: 70%

### Estrutura de Testes
```typescript
describe('ComponentName', () => {
  it('should render correctly', () => {
    // Arrange
    // Act
    // Assert
  })
})
```

### Executar Testes
- `npm run test` - Executar todos
- `npm run test:watch` - Modo watch
- `npm run test:coverage` - Com coverage

## ğŸ“š DOCUMENTAÃ‡ÃƒO

### Arquivo de Contexto
- **LocalizaÃ§Ã£o:** `docs/CONTEXTO.md`
- **Atualizar:** ApÃ³s cada tarefa concluÃ­da
- **ConteÃºdo:**
  - Tarefas completadas
  - Problemas conhecidos
  - PrÃ³ximas tarefas
  - MudanÃ§as significativas

### ComentÃ¡rios no CÃ³digo
- âœ… Documentar funÃ§Ãµes complexas
- âœ… Explicar "porquÃªs", nÃ£o "o quÃªs"
- âœ… Usar JSDoc para funÃ§Ãµes pÃºblicas
- âŒ Evitar comentÃ¡rios Ã³bvios

## ğŸ”„ WORKFLOW

### Antes de Commitar
1. âœ… Executar `npm run lint`
2. âœ… Executar `npm run type-check`
3. âœ… Executar `npm run test`
4. âœ… Executar `npm run format`
5. âœ… Atualizar `docs/CONTEXTO.md`

### Commits
- âœ… Usar Conventional Commits
- âœ… Mensagens claras e descritivas
- âœ… Um commit por feature/fix

### Pull Requests
- âœ… DescriÃ§Ã£o clara do que foi feito
- âœ… Screenshots se houver mudanÃ§as visuais
- âœ… Testes passando
- âœ… Code review obrigatÃ³rio

## ğŸ› ï¸ FERRAMENTAS

### ObrigatÃ³rias
- **ESLint** - Linting
- **Prettier** - FormataÃ§Ã£o
- **Jest** - Testes
- **TypeScript** - Type checking
- **Husky** - Git hooks

### ConfiguraÃ§Ã£o VS Code
- Usar extensÃµes recomendadas em `.vscode/extensions.json`
- FormataÃ§Ã£o automÃ¡tica ao salvar
- ESLint auto-fix ao salvar

## ğŸš« NÃƒO FAZER

- âŒ Commitar sem testes
- âŒ Commitar cÃ³digo nÃ£o formatado
- âŒ Usar `any` sem justificativa
- âŒ Criar componentes sem testes
- âŒ Deixar console.log em produÃ§Ã£o
- âŒ Commitar arquivos de ambiente
- âŒ Quebrar testes existentes

## âœ… CHECKLIST ANTES DE FINALIZAR TAREFA

- [ ] CÃ³digo formatado (`npm run format`)
- [ ] Linter passando (`npm run lint`)
- [ ] Type check passando (`npm run type-check`)
- [ ] Testes passando (`npm run test`)
- [ ] Testes escritos para novo cÃ³digo
- [ ] **TraduÃ§Ãµes revisadas e completas** (en, pt, es) âš ï¸ **OBRIGATÃ“RIO**
- [ ] `docs/CONTEXTO.md` atualizado
- [ ] DocumentaÃ§Ã£o atualizada se necessÃ¡rio
- [ ] CÃ³digo revisado

## ğŸ“¦ DEPENDÃŠNCIAS

### Adicionar DependÃªncias
- âœ… Verificar se jÃ¡ existe alternativa
- âœ… Verificar manutenÃ§Ã£o ativa
- âœ… Verificar bundle size
- âœ… Documentar motivo da adiÃ§Ã£o

### Atualizar DependÃªncias
- âœ… Testar apÃ³s atualizaÃ§Ã£o
- âœ… Verificar breaking changes
- âœ… Atualizar tipos se necessÃ¡rio

## ğŸŒ INTERNACIONALIZAÃ‡ÃƒO

- âœ… Todas as strings visÃ­veis devem usar `useTranslations`
- âœ… Adicionar traduÃ§Ãµes em `messages/en.json`, `pt.json`, `es.json`
- âœ… NÃ£o hardcodar textos
- âœ… Testar em todos os idiomas
- âš ï¸ **OBRIGATÃ“RIO:** Sempre revisar e completar traduÃ§Ãµes apÃ³s implementar novas funcionalidades
- âš ï¸ **OBRIGATÃ“RIO:** Verificar que todas as strings estÃ£o traduzidas nos 3 idiomas (en, pt, es)
- âš ï¸ **OBRIGATÃ“RIO:** Adicionar traduÃ§Ãµes faltantes antes de finalizar qualquer tarefa

## ğŸ¨ UI/UX

- âœ… Seguir design system do shadcn/ui
- âœ… Acessibilidade (WCAG 2.1 AA)
- âœ… Responsive design
- âœ… Loading states
- âœ… Error states
- âœ… Empty states

## ğŸ” SEGURANÃ‡A

- âœ… NÃ£o expor tokens/keys no cÃ³digo
- âœ… Validar inputs do usuÃ¡rio
- âœ… Sanitizar dados antes de exibir
- âœ… Usar HTTPS em produÃ§Ã£o
- âœ… Validar permissÃµes no frontend E backend

## ğŸ“Š PERFORMANCE

- âœ… Lazy loading de componentes pesados
- âœ… Code splitting
- âœ… Otimizar imagens (next/image)
- âœ… Debounce em buscas
- âœ… Virtual scrolling para listas grandes
- âœ… Lighthouse score > 90

## ğŸ› DEBUGGING

- âœ… Usar React DevTools
- âœ… Usar Next.js DevTools
- âœ… Logs estruturados
- âœ… Error boundaries
- âœ… Sentry para produÃ§Ã£o (se configurado)

## ğŸ“ SUPORTE

- **DocumentaÃ§Ã£o:** Ver `docs/`
- **API:** Ver `BACKEND_API_SPEC.md`
- **Problemas:** Atualizar em `docs/CONTEXTO.md`

---

**Ãšltima atualizaÃ§Ã£o:** 2025-01-XX  
**VersÃ£o:** 1.0.0
